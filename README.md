# Лабораторная работа №4. Визуализация графа

## Как запускать?
Программу сначала нужно скомпилировать с помощью CMake:
```shell
cd build
cmake build .
make 
```
Дальше можно запускать файл `lab4_bmp_graph_generator`. Существуют следующие параметры запуска:
1. `-input`, путь до файла со входными данными. **Обязательный параметр.**
2. `-output`, путь до файла, куда необходимо сохранить изображение. **Обязательный параметр.**
3. `-width`, ширина итогового изображения в пикселях, по умолчанию равна `4096`
4. `-height`, высота итогового изображения в пикселях, по умолчанию равна `4096`
5. `-log`, необходимо ли выводить номер итерации. Если необходимо, укажите `1`, иначе `0`. По умолчанию выводит логи.
6. `-iter`, количество итераций алгоритма. По умолчанию `1000`.

### Пример запуска программы:
Этот пример обрабатывает с логами все файлы из папки `examples/input`, кроме файла `huge-graph.txt` (так как он слишком большой)
```shell
cd build
for file in ../examples/input/*.txt; do
    if [ "$(basename "$file")" != "huge-graph.txt" ]; then
        ./lab4_bmp_graph_generator -input "$file" -output "../examples/output/$(basename "$file" .txt).bmp" -width 1024 -height 1024 -iter 1000 -log 1
    fi
done
```

## Алгоритм 
Для визуализации графа был выбран алгоритм Фрухтермана-Рейнгольда. Коротко о его сути: по умолчанию все вершины отталкиваются друг от друга, но те, которые соединены ребрами – еще и притягиваются. На каждой итерации мы рассчитываем, куда смещается каждая вершина. Также, с помощью параметра "температуры", чем больше итераций было произведено, тем меньше вершины будут поддаваться перемещению.

## Структура проекта
Весь код хранится в папке `src`. Он разделен на 3 части по смыслу: 
1. `src/graph` – тут хранится код для реализации всего, что связано с графами. Реализован класс `Graph`, являющийся оберткой для хранения и удобного использования списка смежности. В директории `src/graph/algo` находится код самого алгоритма Фрухтермана-Рейнгольда.
2. `src/image` – тут хранится реализация для работы с изображением в формате `BMP`. Класс предоставляет методы для рисования и сохранения изображения на устройстве.
3. `src/math` – для удобства вычисления смещений во время работы алгоритма реализовано два вспомогательных класса: `Point2D` и `Vector2D`. Они позволяют удобно выполнять операции с векторами и точками в двумерном пространстве.

Функция `main` и вспомогательные методы, которые отвечают за запуск приложения находятся в файле `src/main.cpp`.

В директории `examples/output` можно посмотреть примеры сгенерированных графов. Они небольшие, чтобы не увеличивать размер репозитория.

В директории `examples/input` находятся примеры входных файлов для генерации.